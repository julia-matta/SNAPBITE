<h2>Explorar restaurantes</h2>

<%= form_with url: explore_path, method: :get, local: true do %>
  <div class="row mb-3">
    <div class="col">
      <%= label_tag :query, "Buscar" %>
      <%= text_field_tag :query,
            params[:query],
            class: "form-control",
            placeholder: "Nome, infos, endereço..."
          %>
    </div>

    <div class="col">
      <%= label_tag :category, "Categoria" %>
      <%= select_tag :category,
            options_for_select(Restaurant::CATEGORIES, selected: params[:category]),
            include_blank: "Todas",
            class: "form-select" %>
    </div>

    <div class="col">
      <%= label_tag :max_price, "Preço médio até (R$)" %>

      <% price_options = [
        ["Sem limite", ""],
        ["Até R$ 50", 50],
        ["Até R$ 100", 100],
        ["Até R$ 150", 150],
        ["Até R$ 200", 200]
      ] %>

      <%= select_tag :max_price,
            options_for_select(price_options, params[:max_price]),
            class: "form-select"
          %>
    </div>
  </div>

  <%= submit_tag "Filtrar", class: "btn btn-primary" %>
<% end %>

<hr>

<% @restaurants.each do |restaurant| %>
  <div class="card mb-3">
    <div class="card-body">
      <h5><%= restaurant.name %> (<%= restaurant.category %>)</h5>
      <% if restaurant.address.present? %>
        <p><strong>Endereço:</strong> <%= restaurant.address %></p>
      <% end %>
      <% if restaurant.infos.present? %>
        <p><%= simple_format(restaurant.infos) %></p>
      <% end %>
      <%= link_to "Ver detalhes", restaurant_path(restaurant), class: "btn btn-sm btn-outline-secondary" %>
    </div>
  </div>
<% end %>
