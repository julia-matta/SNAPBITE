<h1>Quem <%= @user.username.presence || @user.email %> está seguindo</h1>

<% if @following.blank? %>
  <p class="text-muted">Ainda não está seguindo ninguém.</p>
<% else %>
  <% @following.each do |u| %>
    <div class="card p-3 mb-2">
      <div class="d-flex justify-content-between align-items-center">
        <div class="d-flex align-items-center gap-2">
          <% if u.profile_picture.attached? %>
            <%= image_tag url_for(u.profile_picture), class: "rounded-circle", style: "width:40px;height:40px;object-fit:cover;" %>
          <% else %>
            <div class="rounded-circle bg-light" style="width:40px;height:40px;"></div>
          <% end %>

          <div>
            <div>
              <%= link_to (u.username.presence || u.email), user_path(u), class: "text-decoration-none" %>
            </div>
            <small class="text-muted"><%= u.owner? ? "Restaurante" : "Cliente" %></small>
          </div>
        </div>

        <% if current_user && current_user == @user %>
          <%= button_to "Deixar de seguir", friendship_path(u), method: :delete, class: "btn btn-outline-danger btn-sm" %>
        <% end %>
      </div>
    </div>
  <% end %>
<% end %>
